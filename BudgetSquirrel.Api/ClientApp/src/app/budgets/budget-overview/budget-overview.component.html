<div id="budgets">

  <ng-template [ngIf]="this.isEditingRootName" [ngIfElse]="notEditingRootName">
    <input
      class="inplace-input inplace-input__input inplace-input--large"
      name="root-budget-name"
      aria-label="Root Budget Name"
      (blur)="onBlurInplaceEdit('rootName', $event)"
      (mouseup)="$event.target.focus();" />
  </ng-template>
  <ng-template #notEditingRootName>
    <h2
      class="inplace-input inplace-input__focusable inplace-input--large"
      (mousedown)="onOpenInplaceEdit('rootName', $event)">
      {{this.rootBudget.name}}
    </h2>
  </ng-template>

  <div class="root-budget-details">
    <div class="root-budget-stat">
      <h5 id="rootAmountLabel">Planned Income</h5>

      <ng-template [ngIf]="this.isEditingRootAmount" [ngIfElse]="notEditingRootAmount">
        <input
          class="inplace-input inplace-input__input inplace-input--short"
          type="number"
          step="0.01"
          aria-labelledby="rootAmountLabel"
          (blur)="onBlurInplaceEdit('rootAmount', $event)"
          (mouseup)="$event.target.focus();" />
      </ng-template>
      <ng-template #notEditingRootAmount>
        <span
          class="inplace-input inplace-input--short inplace-input__focusable"
          (mousedown)="onOpenInplaceEdit('rootAmount', $event)">
          {{this.rootBudget.setAmount | currency}}
        </span>
      </ng-template>
    </div>

    <div class="root-budget-stat">
      <h5>Current Balance</h5>
      <span>{{this.rootBudget.fundBalance | currency}}</span>
    </div>
  </div>

  <div class="root-budget-controls">
    <button
      class="button button--primary button--wide"
      [ngClass]="{'button--disabled': isAddingBudget}"
      [disabled]="isAddingBudget"
      (click)="onAddBudgetClick(rootBudget)">
      Add Budget
    </button>
  </div>

  <div>
    <bs-budget
      *ngFor="let budget of rootBudget.subBudgets"
      [budget]="budget"
      [level]=1
      (addBudget)="onAddBudgetClick($event)">
    </bs-budget>
  </div>

  <div *ngIf="this.isAddingBudget">
    <bs-add-budget-form (onClose)="onCloseAddBudgetModal()" (onSaveClicked)="onSaveBudget($event)" [parentBudget]="parentBudgetForCreateBudget"></bs-add-budget-form>
  </div>

</div>